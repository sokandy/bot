# 股票監控系統使用說明

## 功能概述

您的Telegram Bot現在已經具備了完整的股票監控功能，包括：

- 📊 股票價格查詢
- 📈 詳細財務信息
- 👀 股票價格監控
- 🚨 價格警報通知
- 💾 數據庫存儲

## 可用的股票命令

### 基本查詢
- `/stock <代碼>` - 查詢股票基本價格信息
- `/stockinfo <代碼>` - 獲取詳細股票信息（財務數據、P/E比率等）
- `/stocknews <代碼>` - 查詢股票相關新聞
- `/stockcompare <代碼1> <代碼2>` - 比較多個股票

### 監控功能
- `/stockwatch <代碼> <價格>` - 設置股票價格監控
- `/watchlist` - 查看您的監控列表
- `/removewatch <ID>` - 移除指定的監控

## 香港股票使用示例

### 設置監控
```
/stockwatch 0005.HK 50.0
/stockwatch 0700.HK 300.0
/stockwatch 0941.HK 45.0
```

### 查詢信息
```
/stockinfo 0005.HK
/stock 0700.HK
/stockcompare 0005.HK 0700.HK
```

## 監控類型

- **高於目標價格** (above): 當股票價格上漲到目標價格時發送警報
- **低於目標價格** (below): 當股票價格下跌到目標價格時發送警報

## 數據庫支持

系統使用SQLite數據庫存儲：
- 股票監控設置
- 價格歷史記錄
- 用戶偏好設置

## 警報系統

- 自動檢查股票價格（可配置間隔）
- 達到目標價格時發送Telegram通知
- 防止重複警報（冷卻期：1小時）
- 記錄警報歷史

## 安裝和配置

### 1. 安裝依賴
```bash
pip install python-telegram-bot requests
```

### 2. 配置Bot Token
在 `bot_test.py` 中設置您的Telegram Bot Token

### 3. 啟動Bot
```bash
python bot_test.py
```

## 高級功能

### 自定義檢查間隔
可以修改監控檢查間隔（默認5分鐘）

### 價格歷史追蹤
系統自動保存股票價格歷史，可用於分析

### 多用戶支持
每個用戶的監控設置獨立存儲

## 故障排除

### 常見問題

1. **無法獲取股票數據**
   - 檢查網絡連接
   - 確認股票代碼格式正確
   - 某些股票可能暫時無法獲取數據

2. **警報未發送**
   - 檢查Bot是否在線
   - 確認監控設置正確
   - 檢查冷卻期設置

3. **數據庫錯誤**
   - 檢查文件權限
   - 確認磁盤空間充足

## 技術架構

- **前端**: Telegram Bot API
- **後端**: Python + SQLite
- **數據源**: Yahoo Finance API
- **監控**: 多線程定時檢查

## 安全注意事項

- 不要分享您的Bot Token
- 定期備份數據庫文件
- 監控API使用量避免超限

## 未來擴展

- 支持更多股票市場
- 添加圖表分析
- 實現移動平均線監控
- 支持期權和衍生品

## 聯繫支持

如有問題或建議，請通過Telegram聯繫Bot管理員。
